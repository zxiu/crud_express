%ul.nav.nav-tabs
  - models.each_with_index do |(model_name, v), i|
    %li
      %a{"data-toggle" => "tab", :href => "#tab-#{model_name}"}
        = model_name

.tab-content
  - models.each_with_index do |(model_name, value), i|
    .tab-pane.fade{:id => "tab-#{model_name}"}
      %p
        .pull-right
          = button_to "refresh", {controller: value[:controller], action: :index},
                  method: :get, remote: true, class: ["btn", "btn-success", "btn-refresh"]
      #table-container{controller: value[:controller]}

.modal.fade{:id => "modal", "aria-labelledby" => "model-title", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} Ã—
        %h4.modal-title{:id => "model-title"} Modal title
      .modal-body

:javascript
  $(function() {
    $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
      var tabId = $(e.target).attr('href');
      $(tabId).find(".btn-refresh").click();
    }).each(function(i){
      if (i == 0){
        $(this).tab('show')
      }
    })
  });
